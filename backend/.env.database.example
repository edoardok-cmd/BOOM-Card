# BOOM Card Database Configuration Examples
# Copy the appropriate configuration to your .env file

# ===== POSTGRESQL OPTIONS =====

# Option 1: Supabase (Recommended - 500MB free)
# Get from: https://app.supabase.com/project/_/settings/database
DATABASE_URL="postgresql://postgres:[YOUR-PASSWORD]@db.[YOUR-PROJECT-REF].supabase.co:5432/postgres"
# Optional: Direct connection (bypasses connection pooler)
DIRECT_URL="postgresql://postgres:[YOUR-PASSWORD]@db.[YOUR-PROJECT-REF].supabase.co:5432/postgres"

# Option 2: Neon (3GB free, serverless)
# Get from: https://console.neon.tech/app/projects/[project-id]/connection
DATABASE_URL="postgresql://[user]:[password]@[endpoint].neon.tech/[database]?sslmode=require"

# Option 3: ElephantSQL (20MB free - for testing only)
# Get from: https://customer.elephantsql.com/instance
DATABASE_URL="postgresql://[user]:[password]@[server].db.elephantsql.com/[database]"

# Option 4: Aiven (1 month free trial)
# Get from: https://console.aiven.io/project/[project]/services/[service]/overview
DATABASE_URL="postgresql://[user]:[password]@[host]:[port]/[database]?sslmode=require"

# ===== REDIS OPTIONS =====

# Option 1: Upstash (Recommended - 10,000 commands/day free)
# Get from: https://console.upstash.com/redis
REDIS_URL="redis://default:[password]@[endpoint].upstash.io:[port]"
# For serverless (Edge) deployments:
UPSTASH_REDIS_REST_URL="https://[endpoint].upstash.io"
UPSTASH_REDIS_REST_TOKEN="[your-token]"

# Option 2: Redis Cloud (30MB free)
# Get from: https://app.redislabs.com/#/databases
REDIS_URL="redis://:[password]@[endpoint]:[port]"

# Option 3: Railway Redis (Temporary - $5 credit)
# Get from: Railway dashboard
REDIS_URL="redis://default:[password]@[host]:[port]"

# ===== CONNECTION POOL SETTINGS =====
# Adjust based on your free tier limits

# PostgreSQL Pool
DB_POOL_MIN=2
DB_POOL_MAX=10  # Supabase free tier allows 60 connections total
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=10000

# Redis Pool
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=500
REDIS_COMMAND_TIMEOUT=5000

# ===== SSL/TLS SETTINGS =====
# Most cloud databases require SSL

DB_SSL_ENABLED=true
DB_SSL_REJECT_UNAUTHORIZED=false  # Set to true in production with proper certs
REDIS_TLS_ENABLED=true

# ===== MIGRATION SETTINGS =====
RUN_MIGRATIONS_ON_START=false  # Set to true for automatic migrations
MIGRATION_TABLE_NAME=schema_migrations

# ===== MONITORING =====
# Optional: Monitor slow queries
SLOW_QUERY_LOG_ENABLED=true
SLOW_QUERY_THRESHOLD_MS=1000